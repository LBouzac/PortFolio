<section class="projets-section">
  <h2>Mes Projets</h2>
  <!-- Affichage Galerie (pour la page projets) -->
  <div *ngIf="isProjectsPage && !isHomePage" class="projets-galerie">
    <!-- Système de filtrage -->
    <div class="filtres">
      <label><input type="checkbox" class="filtre-btn" [class.actif]="estCategorieActive('Ecole')" (click)="filtrerProjets('Ecole')">École</label>
      <label><input type="checkbox" class="filtre-btn" [class.actif]="estCategorieActive('Personnel')" (click)="filtrerProjets('Personnel')">Personnel</label>
      <label><input type="checkbox" class="filtre-btn" [class.actif]="estCategorieActive('Alternance')" (click)="filtrerProjets('Alternance')">Alternance</label>
    </div>
  </div>
  <!-- Affichage Carrousel (pour la page d'accueil) -->
  <div *ngIf="isHomePage || !isProjectsPage" class="swiper-wrapper">
    <swiper-container
      slides-per-view="auto"
      space-between="30"
      loop="true"
      loop-additional-slides="2"
      centered-slides="true"
      speed="600"
      autoplay="{ delay: 3000 }"
      effect="coverflow"
      grab-cursor="true"
      keyboard="true"
      lazy="true"
      coverflow-effect-rotate="5"
      coverflow-effect-depth="100"
      navigation="true"
      coverflow-effect-shadow="false"
      coverflow-effect-stretch="0"
      coverflow-effect-slide-shadows="false"
    >
      <swiper-slide *ngFor="let projet of projets">
        <div class="projet-card">
          <div class="projet-image">
            <img [src]="projet.image" [alt]="projet.titre">
          </div>
          <div class="projet-content">
            <h3>{{ projet.titre }}</h3>
            <p>{{ projet.description }}</p>
            <div class="projet-actions">
              <a *ngIf="projet.github" [href]="projet.github" target="_blank">Voir le code</a>
              <span *ngIf="!projet.github">Aucun lien disponible</span>
            </div>
          </div>
        </div>
      </swiper-slide>
    </swiper-container>
  </div>
  <div *ngIf="isProjectsPage && !isHomePage" class="projets-galerie">
    <div class="projet-card" *ngFor="let projet of projetsFiltres">
      <div class="projet-image">
        <img [src]="projet.image" [alt]="projet.titre">
        <!-- Badge pour la catégorie -->
        <span class="projet-categorie" *ngIf="projet.categorie">{{ projet.categorie }}</span>
      </div>
      <div class="projet-content">
        <h3>{{ projet.titre }}</h3>
        <p>{{ projet.description }}</p>

        <div class="langages-container">
          <div class="langages-icons">
            <!-- Gestion des langages uniques ou multiples -->
            <ng-container *ngIf="projet.LanguageCode">
              <ng-container *ngIf="!projet.LanguageCode.includes(',')">
                <div class="tech-icon">
                  <img src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/{{projet.LanguageCode}}/{{projet.LanguageCode}}-original.svg"
                       [alt]="projet.LanguageCode"
                       [title]="projet.LanguageCode" />
                </div>
              </ng-container>
              <ng-container *ngIf="projet.LanguageCode.includes(',')">
                <div class="tech-icon" *ngFor="let lang of projet.LanguageCode.split(',')">
                  <img src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/{{lang.trim()}}/{{lang.trim()}}-original.svg"
                       [alt]="lang.trim()"
                       [title]="lang.trim()" />
                </div>
              </ng-container>
            </ng-container>
          </div>
        </div>

        <div class="projet-actions">
          <a *ngIf="projet.github" [href]="projet.github" target="_blank" class="btn-github">
            <i class="fab fa-github"></i> Voir le code
          </a>
          <span *ngIf="!projet.github" class="no-link">Code privé</span>
        </div>
      </div>
    </div>
  </div>
</section>
